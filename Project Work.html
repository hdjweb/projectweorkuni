<!DOCTYPE html>
<html lang="it" ng-app="starRatingApp">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guida al Calcolo del Fattore di Rischio nel Settore Aeronautico</title>
    <link rel="stylesheet" href="style.css">
</head>
<body ng-controller="MainCtrl as vm">
<div class="container" role="main" aria-label="Guida al fattore di rischio">
    <h1>Guida al Calcolo del Fattore di Rischio nel Settore Aeronautico</h1>
    <p class="intro-text">
        Scarica gratuitamente il documento esplicativo in PDF sul calcolo del fattore di rischio.<br>
        La guida contiene spiegazioni dettagliate, formule, esempi applicativi e riferimenti normativi.
    </p>
    <a href="calcolo_fattore_rischio.pdf" download class="download-btn" aria-label="Scarica il PDF guida">Scarica il PDF</a>
    
    <h2 class="valuta-guida">Valuta la guida</h2>
    <star-rating rating="vm.rating" max="5"></star-rating>
    <span class="rating-value" aria-live="polite">{{vm.rating || 0}} / 5</span>

    <div class="feedback-box">
        <h2>Lascia il tuo feedback</h2>
        <form name="feedbackForm" ng-submit="vm.sendFeedback(feedbackForm)" novalidate autocomplete="off" aria-label="Form di feedback">
            <label for="feedback" class="feedback-label">Facci sapere la tua opinione:</label>
            <textarea id="feedback"
                      name="feedbackText"
                      ng-model="vm.feedbackText"
                      placeholder="Scrivi un suggerimento o un commento..."
                      required
                      aria-required="true"
                      aria-describedby="feedbackError"></textarea>
            <div id="feedbackError"
                 ng-show="feedbackForm.feedbackText.$touched && feedbackForm.feedbackText.$error.required">
                Il feedback non può essere vuoto.
            </div>

            <label for="email" class="feedback-label email-label">La tua email:</label>
            <input type="email"
                   id="email"
                   name="email"
                   ng-model="vm.email"
                   placeholder="esempio@dominio.com"
                   required
                   aria-required="true"
                   aria-describedby="emailError"
                   autocomplete="email">
            <div id="emailError"
                 ng-show="vm.emailError">
                Inserisci un indirizzo email valido.
            </div>

            <div class="privacy-check">
                <div class="privacy-info">
                    L’indirizzo e-mail sarà utilizzato esclusivamente per l’invio del feedback tramite il tuo programma di posta e non sarà memorizzato.
                </div>
                <div class="privacy-row">
                    <input type="checkbox" id="privacy" ng-model="vm.privacyAccepted" class="privacy-checkbox" aria-required="true" />
                    <label for="privacy" class="privacy-label">
                        Dichiaro di aver letto e accettato l’<a class="privacy-link" href="privacy.html" target="_blank" rel="noopener noreferrer">informativa privacy</a>.
                    </label>
                </div>
            </div>
            <div class="privacy-error" ng-show="vm.privacyError">
                Devi accettare l'informativa privacy per inviare il feedback.
            </div>

            <button class="send-btn" type="submit" ng-disabled="!vm.canSend || !vm.privacyAccepted">
                Invia feedback
            </button>
            <div class="success-message" ng-show="vm.feedbackSent" aria-live="polite">Grazie per il tuo feedback!</div>
        </form>
    </div>
</div>
<svg height="0" width="0">
    <linearGradient id="half-gold">
        <stop offset="50%" stop-color="#FFD600"/>
        <stop offset="50%" stop-color="#ccc"/>
    </linearGradient>
</svg>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.3/angular.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
